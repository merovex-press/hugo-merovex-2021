{{ $klass := "mx-auto rounded shadow-lg" }}
{{- if .Resources.ByType "image" }}
{{- with .Resources.ByType "image" }}
{{- range . }}
{{- $resizedsm := .Resize "200x300" }}
{{- $resizedmd := .Resize "330x500" }}
{{- $resizedlg := .Resize "500x750" }}
{{- $resizedxl := .Resize "660x1000" }}
{{- $low := .Resize "80x q10 Smart Gaussian" }}
<figure class="bg-cover" style="background-image: url({{$low.RelPermalink}});">
<picture>

<source media="(min-width: 1280px)" xsrcset="{{ $resizedlg.RelPermalink }} 1x,
      {{ $resizedxl.RelPermalink }} 2x,
      {{ $resizedxl.RelPermalink }} 3x">

<source media="(min-width: 1024px)" xsrcset="{{ $resizedlg.RelPermalink }} 1x,
      {{ $resizedxl.RelPermalink }} 2x,
      {{ $resizedxl.RelPermalink }} 3x">

<source media="(min-width: 768px)" xsrcset="{{ $resizedmd.RelPermalink }} 1x,
      {{ $resizedlg.RelPermalink }} 2x,
      {{ $resizedxl.RelPermalink }} 3x">

<!-- Support Mobile -->
<source media="(min-width: 640px)" xsrcset="{{ $resizedsm.RelPermalink }} 1x,
      {{ $resizedmd.RelPermalink }} 2x,
      {{ $resizedlg.RelPermalink }} 3x">
<img class="{{$klass}}" ssrc='{{ $resizedmd.RelPermalink }}'>
{{- end }}
{{- end }}
{{else}}
<img class="{{$klass}}" src='https://via.placeholder.com/333x500?text=Book+Cover'>
{{- end }}
</picture>
</figure>